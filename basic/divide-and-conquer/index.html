<!doctype html><html lang="zh" class="no-js"><meta charset="utf-8"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//s3.pstatp.com"><link rel="dns-prefetch" href="//oi-wiki.org"><link rel="dns-prefetch" href="//search.oi-wiki.org"><link rel="dns-prefetch" href="//cdn.jsdelivr.net"><link rel="dns-prefetch" href="//api.github.com"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="description" content="OI Wiki 是一个编程竞赛知识整合站点，提供有趣又实用的编程竞赛知识以及其他有帮助的内容，帮助广大编程竞赛爱好者更快更深入地学习编程竞赛"><link rel="canonical" href="https://oi-wiki.org/basic/divide-and-conquer/"><meta name="author" content="OI Wiki Team"><meta name="lang:clipboard.copy" content="复制"><meta name="lang:clipboard.copied" content="已复制"><meta name="lang:search.language" content="jp"><meta name="lang:search.pipeline.stopwords" content="True"><meta name="lang:search.pipeline.trimmer" content="True"><meta name="lang:search.result.none" content="没有找到符合条件的结果"><meta name="lang:search.result.one" content="找到 1 个符合条件的结果"><meta name="lang:search.result.other" content="# 个符合条件的结果"><meta name="lang:search.tokenizer" content="[\uff0c\u3002]+"><link rel="shortcut icon" href="../../favicon.ico"><meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.2.0"><meta name="mobile-web-app-capable" content="yes"><link rel="icon" sizes="48x48" href="/favicon.ico"><link rel="icon" sizes="192x192" href="/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="OI Wiki"><link rel="apple-touch-icon" href="/favicon.ico"><link rel="apple-touch-icon-precomposed" href="/favicon.ico"><link rel="apple-touch-startup-image" href="/favicon.ico"><meta name="msapplication-TileImage" content="/favicon.ico"><meta name="msapplication-square310x310logo" content="/favicon.ico"><link rel="icon" href="/favicon.ico" type="image/x-icon"><script>"use strict";"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js",{scope:"/"}).then(function(e){console.log("Registration succeeded. Scope is "+e.scope)}).catch(function(e){console.log("Registration failed with "+e)})</script><title>递归 &amp; 分治 - OI Wiki</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ah@1.4.0/application.572ca0f0.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ah@1.4.0/application-palette.22915126.css"><meta name="theme-color" content=""><script src="https://cdn.jsdelivr.net/npm/ah@1.4.0/modernizr.1eb399a1.js" data-no-instant=""></script><link href="https://fonts.gstatic.com" rel="preconnect" crossorigin=""><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Sans:300,400,400i,700|Fira+Mono"><style>body,input{font-family:"Fira Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Fira Mono","Courier New",Courier,monospace}</style><link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><link rel="manifest" href="../../manifest.webmanifest"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ah@1.2.0/han.min.css"><link rel="stylesheet" href="../../_static/css/extra.css?v=11"><body dir="ltr" data-md-color-primary="white" data-md-color-accent="red"><svg class="md-svg"><defs><svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z"></path></svg></defs></svg> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" data-md-component="overlay" for="__drawer"></label> <a href="#_1" tabindex="1" class="md-skip">跳转至</a><header class="md-header" data-md-component="header"><nav class="md-header-nav md-grid"><div class="md-flex"><div class="md-flex__cell md-flex__cell--shrink"><a href="https://oi-wiki.org" title="OI Wiki" class="md-header-nav__button md-logo"><i class="md-icon">school</i></a></div><div class="md-flex__cell md-flex__cell--shrink"><label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label></div><div class="md-flex__cell md-flex__cell--stretch"><div class="md-flex__ellipsis md-header-nav__title" data-md-component="title"><span class="md-header-nav__topic">OI Wiki </span><span class="md-header-nav__topic">递归 &amp; 分治</span></div></div><div class="md-flex__cell md-flex__cell--shrink"><label class="md-icon md-icon--search md-header-nav__button" for="__search"></label><div class="md-search" data-md-component="search" role="dialog"><label class="md-search__overlay" for="__search"></label><div class="md-search__inner" role="search"><form class="md-search__form" name="search"><input class="md-search__input" name="query" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active"> <label class="md-icon md-search__icon" for="__search"></label> <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1"></button></form><div class="md-search__output"><div class="md-search__scrollwrap" data-md-scrollfix=""><div class="md-search-result" data-md-component="result"><div class="md-search-result__meta">键入以开始搜索</div><ol class="md-search-result__list"></ol></div></div></div></div></div></div><div class="md-flex__cell md-flex__cell--shrink"><div class="md-header-nav__source"><a href="https://github.com/24OI/OI-wiki/" title="前往 Github 仓库" class="md-source" data-md-source="github"><div class="md-source__icon"><svg viewBox="0 0 24 24" width="24" height="24"><use xlink:href="#__github" width="24" height="24"></use></svg></div><div class="md-source__repository">24OI/OI-wiki</div></a></div></div></div></nav></header><div class="md-container"><nav class="md-tabs md-tabs--active" data-md-component="tabs"><div class="md-tabs__inner md-grid"><ul class="md-tabs__list"><li class="md-tabs__item"><a href="../.." title="简介" class="md-tabs__link">简介</a><li class="md-tabs__item"><a href="../" title="基础部分" class="md-tabs__link md-tabs__link--active">基础部分</a><li class="md-tabs__item"><a href="../../search/" title="搜索" class="md-tabs__link">搜索</a><li class="md-tabs__item"><a href="../../dp/" title="动态规划" class="md-tabs__link">动态规划</a><li class="md-tabs__item"><a href="../../string/" title="字符串" class="md-tabs__link">字符串</a><li class="md-tabs__item"><a href="../../math/" title="数学" class="md-tabs__link">数学</a><li class="md-tabs__item"><a href="../../ds/" title="数据结构" class="md-tabs__link">数据结构</a><li class="md-tabs__item"><a href="../../graph/" title="图论" class="md-tabs__link">图论</a><li class="md-tabs__item"><a href="../../geometry/" title="计算几何" class="md-tabs__link">计算几何</a><li class="md-tabs__item"><a href="../../misc/" title="杂项" class="md-tabs__link">杂项</a></ul></div></nav><main class="md-main"><div class="md-main__inner md-grid" data-md-component="container"><div class="md-sidebar md-sidebar--primary" data-md-component="navigation"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--primary" data-md-level="0"><label class="md-nav__title md-nav__title--site" for="__drawer"><a href="https://oi-wiki.org" title="OI Wiki" class="md-nav__button md-logo"><i class="md-icon">school</i> </a>OI Wiki</label><div class="md-nav__source"><a href="https://github.com/24OI/OI-wiki/" title="前往 Github 仓库" class="md-source" data-md-source="github"><div class="md-source__icon"><svg viewBox="0 0 24 24" width="24" height="24"><use xlink:href="#__github" width="24" height="24"></use></svg></div><div class="md-source__repository">24OI/OI-wiki</div></a></div><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1"> <label class="md-nav__link" for="nav-1">简介</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-1">简介</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../.." title="Getting Started" class="md-nav__link">Getting Started</a><li class="md-nav__item"><a href="../../intro/mode/" title="OI 赛事与赛制" class="md-nav__link">OI 赛事与赛制</a><li class="md-nav__item"><a href="../../intro/resources/" title="学习资源" class="md-nav__link">学习资源</a><li class="md-nav__item"><a href="../../intro/common-mistakes/" title="常见错误" class="md-nav__link">常见错误</a><li class="md-nav__item"><a href="../../intro/common-tricks/" title="常见技巧" class="md-nav__link">常见技巧</a><li class="md-nav__item"><a href="../../intro/non-traditional/" title="非传统题" class="md-nav__link">非传统题</a><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-7" type="checkbox" id="nav-1-7"> <label class="md-nav__link" for="nav-1-7">工具软件</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-1-7">工具软件</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../intro/judgers/" title="评测工具" class="md-nav__link">评测工具</a><li class="md-nav__item"><a href="../../intro/editors/" title="编辑工具" class="md-nav__link">编辑工具</a><li class="md-nav__item"><a href="../../intro/wsl/" title="WSL (Windows 10)" class="md-nav__link">WSL (Windows 10)</a><li class="md-nav__item"><a href="../../intro/spj/" title="Special Judge" class="md-nav__link">Special Judge</a><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-7-5" type="checkbox" id="nav-1-7-5"> <label class="md-nav__link" for="nav-1-7-5">Testlib</label><nav class="md-nav" data-md-component="collapsible" data-md-level="3"><label class="md-nav__title" for="nav-1-7-5">Testlib</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../intro/testlib/" title="Testlib 简介" class="md-nav__link">Testlib 简介</a><li class="md-nav__item"><a href="../../intro/testlib/general/" title="通用" class="md-nav__link">通用</a><li class="md-nav__item"><a href="../../intro/testlib/generator/" title="Generator" class="md-nav__link">Generator</a><li class="md-nav__item"><a href="../../intro/testlib/validator/" title="Validator" class="md-nav__link">Validator</a><li class="md-nav__item"><a href="../../intro/testlib/interactor/" title="Interactor" class="md-nav__link">Interactor</a><li class="md-nav__item"><a href="../../intro/testlib/checker/" title="Checker" class="md-nav__link">Checker</a></ul></nav></ul></nav><li class="md-nav__item"><a href="../../intro/docker-deploy/" title="Docker 部署" class="md-nav__link">Docker 部署</a><li class="md-nav__item"><a href="../../intro/about/" title="关于本项目" class="md-nav__link">关于本项目</a><li class="md-nav__item"><a href="../../intro/faq/" title="F.A.Q." class="md-nav__link">F.A.Q.</a></ul></nav><li class="md-nav__item md-nav__item--active md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked=""> <label class="md-nav__link" for="nav-2">基础部分</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-2">基础部分</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../" title="基础部分简介" class="md-nav__link">基础部分简介</a><li class="md-nav__item"><a href="../enumerate/" title="枚举" class="md-nav__link">枚举</a><li class="md-nav__item"><a href="../simulate/" title="模拟" class="md-nav__link">模拟</a><li class="md-nav__item md-nav__item--active"><input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc"> <label class="md-nav__link md-nav__link--active" for="__toc">递归 &amp; 分治</label> <a href="./" title="递归 &amp; 分治" class="md-nav__link md-nav__link--active">递归 &amp; 分治</a><nav class="md-nav md-nav--secondary"><label class="md-nav__title" for="__toc">目录</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="#_1" title="递归详解" class="md-nav__link">递归详解</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#_2" title="为什么要写递归" class="md-nav__link">为什么要写递归</a><li class="md-nav__item"><a href="#_3" title="写递归的技巧" class="md-nav__link">写递归的技巧</a><li class="md-nav__item"><a href="#_4" title="递归优化" class="md-nav__link">递归优化</a></ul></nav><li class="md-nav__item"><a href="#_5" title="分治算法" class="md-nav__link">分治算法</a><li class="md-nav__item"><a href="#__comments" title="评论" class="md-nav__link md-nav__link--active">评论</a></ul></nav><li class="md-nav__item"><a href="../greedy/" title="贪心" class="md-nav__link">贪心</a><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6" type="checkbox" id="nav-2-6"> <label class="md-nav__link" for="nav-2-6">排序</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-2-6">排序</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../sort-intro/" title="排序简介" class="md-nav__link">排序简介</a><li class="md-nav__item"><a href="../selection-sort/" title="选择排序" class="md-nav__link">选择排序</a><li class="md-nav__item"><a href="../bubble-sort/" title="冒泡排序" class="md-nav__link">冒泡排序</a><li class="md-nav__item"><a href="../insertion-sort/" title="插入排序" class="md-nav__link">插入排序</a><li class="md-nav__item"><a href="../bucket-sort/" title="计数排序" class="md-nav__link">计数排序</a><li class="md-nav__item"><a href="../quick-sort/" title="快速排序" class="md-nav__link">快速排序</a><li class="md-nav__item"><a href="../merge-sort/" title="归并排序" class="md-nav__link">归并排序</a><li class="md-nav__item"><a href="../heap-sort/" title="堆排序" class="md-nav__link">堆排序</a><li class="md-nav__item"><a href="../radix-sort/" title="基数排序" class="md-nav__link">基数排序</a><li class="md-nav__item"><a href="../shell-sort/" title="希尔排序" class="md-nav__link">希尔排序</a><li class="md-nav__item"><a href="../stl-sort/" title="排序相关 STL" class="md-nav__link">排序相关 STL</a><li class="md-nav__item"><a href="../use-of-sort/" title="排序应用" class="md-nav__link">排序应用</a></ul></nav><li class="md-nav__item"><a href="../expression/" title="表达式求值" class="md-nav__link">表达式求值</a><li class="md-nav__item"><a href="../binary/" title="二分" class="md-nav__link">二分</a><li class="md-nav__item"><a href="../construction/" title="构造" class="md-nav__link">构造</a><li class="md-nav__item"><a href="../prefix-sum/" title="前缀和 &amp; 差分" class="md-nav__link">前缀和 &amp; 差分</a><li class="md-nav__item"><a href="../file-operation/" title="文件操作" class="md-nav__link">文件操作</a></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3"> <label class="md-nav__link" for="nav-3">搜索</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-3">搜索</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../search/" title="搜索部分简介" class="md-nav__link">搜索部分简介</a><li class="md-nav__item"><a href="../../search/dfs/" title="DFS" class="md-nav__link">DFS</a><li class="md-nav__item"><a href="../../search/bfs/" title="BFS" class="md-nav__link">BFS</a><li class="md-nav__item"><a href="../../search/bidirectional/" title="双向搜索" class="md-nav__link">双向搜索</a><li class="md-nav__item"><a href="../../search/heuristic/" title="启发式搜索" class="md-nav__link">启发式搜索</a><li class="md-nav__item"><a href="../../search/astar/" title="A*" class="md-nav__link">A*</a><li class="md-nav__item"><a href="../../search/iterative/" title="迭代加深搜索" class="md-nav__link">迭代加深搜索</a><li class="md-nav__item"><a href="../../search/idastar/" title="IDA*" class="md-nav__link">IDA*</a><li class="md-nav__item"><a href="../../search/backtracking/" title="回溯法" class="md-nav__link">回溯法</a><li class="md-nav__item"><a href="../../search/dlx/" title="Dancing Links" class="md-nav__link">Dancing Links</a><li class="md-nav__item"><a href="../../search/optimization/" title="优化" class="md-nav__link">优化</a></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4"> <label class="md-nav__link" for="nav-4">动态规划</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-4">动态规划</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../dp/" title="动态规划部分简介" class="md-nav__link">动态规划部分简介</a><li class="md-nav__item"><a href="../../dp/memo/" title="记忆化搜索" class="md-nav__link">记忆化搜索</a><li class="md-nav__item"><a href="../../dp/knapsack/" title="背包 DP" class="md-nav__link">背包 DP</a><li class="md-nav__item"><a href="../../dp/interval/" title="区间 DP" class="md-nav__link">区间 DP</a><li class="md-nav__item"><a href="../../dp/dag/" title="DAG 上的 DP" class="md-nav__link">DAG 上的 DP</a><li class="md-nav__item"><a href="../../dp/tree/" title="树形 DP" class="md-nav__link">树形 DP</a><li class="md-nav__item"><a href="../../dp/state/" title="状压 DP" class="md-nav__link">状压 DP</a><li class="md-nav__item"><a href="../../dp/number/" title="数位 DP" class="md-nav__link">数位 DP</a><li class="md-nav__item"><a href="../../dp/plug/" title="插头 DP" class="md-nav__link">插头 DP</a><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-10" type="checkbox" id="nav-4-10"> <label class="md-nav__link" for="nav-4-10">DP 优化</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-4-10">DP 优化</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../dp/optimizations/binary-knapsack/" title="二进制分组解多重背包" class="md-nav__link">二进制分组解多重背包</a><li class="md-nav__item"><a href="../../dp/optimizations/monotonous-queue-stack/" title="单调队列/单调栈优化" class="md-nav__link">单调队列/单调栈优化</a><li class="md-nav__item"><a href="../../dp/optimizations/convex-hull-optimization/" title="斜率优化" class="md-nav__link">斜率优化</a><li class="md-nav__item"><a href="../../dp/optimizations/knuth-yao-quadrangle-inequality/" title="四边形不等式优化" class="md-nav__link">四边形不等式优化</a><li class="md-nav__item"><a href="../../dp/optimizations/state-optimization/" title="状态设计优化" class="md-nav__link">状态设计优化</a></ul></nav><li class="md-nav__item"><a href="../../dp/misc/" title="其它 DP 方法" class="md-nav__link">其它 DP 方法</a></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5"> <label class="md-nav__link" for="nav-5">字符串</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-5">字符串</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../string/" title="字符串部分简介" class="md-nav__link">字符串部分简介</a><li class="md-nav__item"><a href="../../string/lib-func/" title="标准库" class="md-nav__link">标准库</a><li class="md-nav__item"><a href="../../string/match/" title="字符串匹配" class="md-nav__link">字符串匹配</a><li class="md-nav__item"><a href="../../string/hash/" title="哈希" class="md-nav__link">哈希</a><li class="md-nav__item"><a href="../../string/prefix-function/" title="前缀函数与 KMP 算法" class="md-nav__link">前缀函数与 KMP 算法</a><li class="md-nav__item"><a href="../../string/trie/" title="字典树 (Trie)" class="md-nav__link">字典树 (Trie)</a><li class="md-nav__item"><a href="../../string/pam/" title="回文自动机" class="md-nav__link">回文自动机</a><li class="md-nav__item"><a href="../../string/sa/" title="后缀数组 (SA)" class="md-nav__link">后缀数组 (SA)</a><li class="md-nav__item"><a href="../../string/ac-automaton/" title="AC 自动机" class="md-nav__link">AC 自动机</a><li class="md-nav__item"><a href="../../string/sam/" title="后缀自动机 (SAM)" class="md-nav__link">后缀自动机 (SAM)</a><li class="md-nav__item"><a href="../../string/suffix-tree/" title="后缀树" class="md-nav__link">后缀树</a><li class="md-nav__item"><a href="../../string/manacher/" title="Manacher" class="md-nav__link">Manacher</a><li class="md-nav__item"><a href="../../string/minimal-string/" title="最小表示法" class="md-nav__link">最小表示法</a><li class="md-nav__item"><a href="../../string/z-function/" title="Z 函数（扩展 KMP）" class="md-nav__link">Z 函数（扩展 KMP）</a></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6"> <label class="md-nav__link" for="nav-6">数学</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-6">数学</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../math/" title="数学部分简介" class="md-nav__link">数学部分简介</a><li class="md-nav__item"><a href="../../math/base/" title="进制" class="md-nav__link">进制</a><li class="md-nav__item"><a href="../../math/bit/" title="位运算" class="md-nav__link">位运算</a><li class="md-nav__item"><a href="../../math/bignum/" title="高精度" class="md-nav__link">高精度</a><li class="md-nav__item"><a href="../../math/quick-pow/" title="快速幂" class="md-nav__link">快速幂</a><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-6" type="checkbox" id="nav-6-6"> <label class="md-nav__link" for="nav-6-6">整除及其性质</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-6-6">整除及其性质</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../math/prime/" title="素数" class="md-nav__link">素数</a><li class="md-nav__item"><a href="../../math/gcd/" title="最大公约数" class="md-nav__link">最大公约数</a><li class="md-nav__item"><a href="../../math/euler/" title="欧拉函数" class="md-nav__link">欧拉函数</a><li class="md-nav__item"><a href="../../math/sieve/" title="筛法" class="md-nav__link">筛法</a><li class="md-nav__item"><a href="../../math/fermat/" title="费马小定理" class="md-nav__link">费马小定理</a></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-7" type="checkbox" id="nav-6-7"> <label class="md-nav__link" for="nav-6-7">同余方程相关</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-6-7">同余方程相关</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../math/bezouts/" title="裴蜀定理" class="md-nav__link">裴蜀定理</a><li class="md-nav__item"><a href="../../math/inverse/" title="乘法逆元" class="md-nav__link">乘法逆元</a><li class="md-nav__item"><a href="../../math/linear-equation/" title="线性同余方程" class="md-nav__link">线性同余方程</a><li class="md-nav__item"><a href="../../math/crt/" title="中国剩余定理" class="md-nav__link">中国剩余定理</a><li class="md-nav__item"><a href="../../math/bsgs/" title="BSGS" class="md-nav__link">BSGS</a><li class="md-nav__item"><a href="../../math/primitive-root/" title="原根" class="md-nav__link">原根</a></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-8" type="checkbox" id="nav-6-8"> <label class="md-nav__link" for="nav-6-8">线性代数</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-6-8">线性代数</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../math/matrix/" title="矩阵" class="md-nav__link">矩阵</a><li class="md-nav__item"><a href="../../math/gauss/" title="高斯消元" class="md-nav__link">高斯消元</a><li class="md-nav__item"><a href="../../math/basis/" title="线性基" class="md-nav__link">线性基</a></ul></nav><li class="md-nav__item"><a href="../../math/complex/" title="复数" class="md-nav__link">复数</a><li class="md-nav__item"><a href="../../math/dictionary/" title="分段打表" class="md-nav__link">分段打表</a><li class="md-nav__item"><a href="../../math/mobius/" title="莫比乌斯反演" class="md-nav__link">莫比乌斯反演</a><li class="md-nav__item"><a href="../../math/du-sieves/" title="杜教筛" class="md-nav__link">杜教筛</a><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-13" type="checkbox" id="nav-6-13"> <label class="md-nav__link" for="nav-6-13">多项式</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-6-13">多项式</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../math/poly/" title="多项式部分简介" class="md-nav__link">多项式部分简介</a><li class="md-nav__item"><a href="../../math/lagrange-poly/" title="拉格朗日插值" class="md-nav__link">拉格朗日插值</a><li class="md-nav__item"><a href="../../math/fft/" title="快速傅里叶变换" class="md-nav__link">快速傅里叶变换</a><li class="md-nav__item"><a href="../../math/ntt/" title="快速数论变换" class="md-nav__link">快速数论变换</a><li class="md-nav__item"><a href="../../math/fwt/" title="快速沃尔什变换" class="md-nav__link">快速沃尔什变换</a><li class="md-nav__item"><a href="../../math/poly-inv/" title="多项式求逆" class="md-nav__link">多项式求逆</a><li class="md-nav__item"><a href="../../math/poly-sqrt/" title="多项式开方" class="md-nav__link">多项式开方</a><li class="md-nav__item"><a href="../../math/poly-div-mod/" title="多项式除法|取模" class="md-nav__link">多项式除法|取模</a><li class="md-nav__item"><a href="../../math/poly-ln-exp/" title="多项式对数函数|指数函数" class="md-nav__link">多项式对数函数|指数函数</a><li class="md-nav__item"><a href="../../math/poly-newton/" title="多项式牛顿迭代" class="md-nav__link">多项式牛顿迭代</a><li class="md-nav__item"><a href="../../math/poly-multipoint-eval-interpolation/" title="多项式多点求值|快速插值" class="md-nav__link">多项式多点求值|快速插值</a></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-14" type="checkbox" id="nav-6-14"> <label class="md-nav__link" for="nav-6-14">组合数学</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-6-14">组合数学</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../math/combination/" title="排列组合" class="md-nav__link">排列组合</a><li class="md-nav__item"><a href="../../math/catalan/" title="卡特兰数" class="md-nav__link">卡特兰数</a><li class="md-nav__item"><a href="../../math/stirling/" title="斯特林数" class="md-nav__link">斯特林数</a><li class="md-nav__item"><a href="../../math/cantor/" title="康托展开" class="md-nav__link">康托展开</a><li class="md-nav__item"><a href="../../math/inclusion-exclusion-principle/" title="容斥原理" class="md-nav__link">容斥原理</a><li class="md-nav__item"><a href="../../math/drawer-principle/" title="抽屉原理" class="md-nav__link">抽屉原理</a></ul></nav><li class="md-nav__item"><a href="../../math/expectation/" title="概率 &amp; 期望" class="md-nav__link">概率 &amp; 期望</a><li class="md-nav__item"><a href="../../math/permutation-group/" title="置换群" class="md-nav__link">置换群</a><li class="md-nav__item"><a href="../../math/integral/" title="数值积分" class="md-nav__link">数值积分</a><li class="md-nav__item"><a href="../../math/linear-programming/" title="线性规划" class="md-nav__link">线性规划</a><li class="md-nav__item"><a href="../../math/game-theory/" title="博弈论" class="md-nav__link">博弈论</a><li class="md-nav__item"><a href="../../math/misc/" title="杂项" class="md-nav__link">杂项</a></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7"> <label class="md-nav__link" for="nav-7">数据结构</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-7">数据结构</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../ds/" title="数据结构部分简介" class="md-nav__link">数据结构部分简介</a><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" type="checkbox" id="nav-7-2"> <label class="md-nav__link" for="nav-7-2">STL</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-7-2">STL</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../ds/stl/" title="STL 简介" class="md-nav__link">STL 简介</a><li class="md-nav__item"><a href="../../ds/stl/vector/" title="vector" class="md-nav__link">vector</a><li class="md-nav__item"><a href="../../ds/stl/priority_queue/" title="priority_queue" class="md-nav__link">priority_queue</a><li class="md-nav__item"><a href="../../ds/stl/map/" title="map" class="md-nav__link">map</a><li class="md-nav__item"><a href="../../ds/stl/bitset/" title="bitset" class="md-nav__link">bitset</a></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-3" type="checkbox" id="nav-7-3"> <label class="md-nav__link" for="nav-7-3">pb_ds</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-7-3">pb_ds</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../ds/pb-ds/" title="pb_ds 简介" class="md-nav__link">pb_ds 简介</a><li class="md-nav__item"><a href="../../ds/pb-ds/priority-queue/" title="__gnu_pbds::priority_queue" class="md-nav__link">__gnu_pbds::priority_queue</a></ul></nav><li class="md-nav__item"><a href="../../ds/stack/" title="栈" class="md-nav__link">栈</a><li class="md-nav__item"><a href="../../ds/queue/" title="队列" class="md-nav__link">队列</a><li class="md-nav__item"><a href="../../ds/linked-list/" title="链表" class="md-nav__link">链表</a><li class="md-nav__item"><a href="../../ds/hash/" title="哈希表" class="md-nav__link">哈希表</a><li class="md-nav__item"><a href="../../ds/dsu/" title="并查集" class="md-nav__link">并查集</a><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-9" type="checkbox" id="nav-7-9"> <label class="md-nav__link" for="nav-7-9">堆</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-7-9">堆</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../ds/heap/" title="堆简介" class="md-nav__link">堆简介</a><li class="md-nav__item"><a href="../../ds/binary-heap/" title="二叉堆" class="md-nav__link">二叉堆</a><li class="md-nav__item"><a href="../../ds/pairing-heap/" title="配对堆" class="md-nav__link">配对堆</a></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-10" type="checkbox" id="nav-7-10"> <label class="md-nav__link" for="nav-7-10">块状数据结构</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-7-10">块状数据结构</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../ds/square-root-decomposition/" title="分块思想" class="md-nav__link">分块思想</a><li class="md-nav__item"><a href="../../ds/block-list/" title="块状链表" class="md-nav__link">块状链表</a><li class="md-nav__item"><a href="../../ds/block-array/" title="块状数组" class="md-nav__link">块状数组</a><li class="md-nav__item"><a href="../../ds/tree-decompose/" title="树分块" class="md-nav__link">树分块</a></ul></nav><li class="md-nav__item"><a href="../../ds/monotonous-stack/" title="单调栈" class="md-nav__link">单调栈</a><li class="md-nav__item"><a href="../../ds/monotonous-queue/" title="单调队列" class="md-nav__link">单调队列</a><li class="md-nav__item"><a href="../../ds/sparse-table/" title="倍增" class="md-nav__link">倍增</a><li class="md-nav__item"><a href="../../ds/bit/" title="树状数组" class="md-nav__link">树状数组</a><li class="md-nav__item"><a href="../../ds/segment/" title="线段树" class="md-nav__link">线段树</a><li class="md-nav__item"><a href="../../ds/dividing/" title="划分树" class="md-nav__link">划分树</a><li class="md-nav__item"><a href="../../ds/virtual-tree/" title="虚树" class="md-nav__link">虚树</a><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-18" type="checkbox" id="nav-7-18"> <label class="md-nav__link" for="nav-7-18">平衡树</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-7-18">平衡树</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../ds/bst/" title="二叉搜索树简介" class="md-nav__link">二叉搜索树简介</a><li class="md-nav__item"><a href="../../ds/treap/" title="Treap" class="md-nav__link">Treap</a><li class="md-nav__item"><a href="../../ds/splay/" title="Splay" class="md-nav__link">Splay</a><li class="md-nav__item"><a href="../../ds/wblt/" title="WBLT" class="md-nav__link">WBLT</a><li class="md-nav__item"><a href="../../ds/sbt/" title="Size Balanced Tree" class="md-nav__link">Size Balanced Tree</a><li class="md-nav__item"><a href="../../ds/avl/" title="AVL 树" class="md-nav__link">AVL 树</a><li class="md-nav__item"><a href="../../ds/scapegoat/" title="替罪羊树" class="md-nav__link">替罪羊树</a></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-19" type="checkbox" id="nav-7-19"> <label class="md-nav__link" for="nav-7-19">树套树</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-7-19">树套树</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../ds/seg-in-seg/" title="线段树套线段树" class="md-nav__link">线段树套线段树</a><li class="md-nav__item"><a href="../../ds/seg-in-balanced/" title="平衡树套线段树" class="md-nav__link">平衡树套线段树</a><li class="md-nav__item"><a href="../../ds/balanced-in-seg/" title="线段树套平衡树" class="md-nav__link">线段树套平衡树</a><li class="md-nav__item"><a href="../../ds/persistent-in-bit/" title="树状数组套主席树" class="md-nav__link">树状数组套主席树</a></ul></nav><li class="md-nav__item"><a href="../../ds/k-dtree/" title="K-Dtree" class="md-nav__link">K-Dtree</a><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-21" type="checkbox" id="nav-7-21"> <label class="md-nav__link" for="nav-7-21">可持久化数据结构</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-7-21">可持久化数据结构</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../ds/persistent/" title="可持久化数据结构简介" class="md-nav__link">可持久化数据结构简介</a><li class="md-nav__item"><a href="../../ds/persistent-seg/" title="可持久化线段树" class="md-nav__link">可持久化线段树</a><li class="md-nav__item"><a href="../../ds/persistent-block-array/" title="可持久化块状数组" class="md-nav__link">可持久化块状数组</a><li class="md-nav__item"><a href="../../ds/persistent-balanced/" title="可持久化平衡树" class="md-nav__link">可持久化平衡树</a><li class="md-nav__item"><a href="../../ds/persistent-trie/" title="可持久化字典树" class="md-nav__link">可持久化字典树</a></ul></nav><li class="md-nav__item"><a href="../../ds/odt/" title="珂朵莉树" class="md-nav__link">珂朵莉树</a><li class="md-nav__item"><a href="../../ds/lct/" title="Link Cut Tree" class="md-nav__link">Link Cut Tree</a><li class="md-nav__item"><a href="../../ds/ett/" title="Euler Tour Tree" class="md-nav__link">Euler Tour Tree</a></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8"> <label class="md-nav__link" for="nav-8">图论</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-8">图论</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../graph/" title="图论部分简介" class="md-nav__link">图论部分简介</a><li class="md-nav__item"><a href="../../graph/basic/" title="图论基础" class="md-nav__link">图论基础</a><li class="md-nav__item"><a href="../../graph/traverse/" title="图的遍历" class="md-nav__link">图的遍历</a><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-4" type="checkbox" id="nav-8-4"> <label class="md-nav__link" for="nav-8-4">树上问题</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-8-4">树上问题</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../graph/tree-basic/" title="树基础" class="md-nav__link">树基础</a><li class="md-nav__item"><a href="../../graph/lca/" title="最近公共祖先" class="md-nav__link">最近公共祖先</a><li class="md-nav__item"><a href="../../graph/dfs-order/" title="DFS 序" class="md-nav__link">DFS 序</a><li class="md-nav__item"><a href="../../graph/tree-misc/" title="树的其他问题" class="md-nav__link">树的其他问题</a><li class="md-nav__item"><a href="../../graph/tree-hash/" title="树哈希" class="md-nav__link">树哈希</a><li class="md-nav__item"><a href="../../graph/heavy-light-decomposition/" title="树链剖分" class="md-nav__link">树链剖分</a><li class="md-nav__item"><a href="../../graph/tree-divide/" title="树分治" class="md-nav__link">树分治</a><li class="md-nav__item"><a href="../../graph/dynamic-tree-divide/" title="动态树分治" class="md-nav__link">动态树分治</a><li class="md-nav__item"><a href="../../graph/dsu-on-tree/" title="树上启发式合并" class="md-nav__link">树上启发式合并</a></ul></nav><li class="md-nav__item"><a href="../../graph/matrix-tree/" title="矩阵树定理" class="md-nav__link">矩阵树定理</a><li class="md-nav__item"><a href="../../graph/dag/" title="有向无环图" class="md-nav__link">有向无环图</a><li class="md-nav__item"><a href="../../graph/topo/" title="拓扑排序" class="md-nav__link">拓扑排序</a><li class="md-nav__item"><a href="../../graph/mst/" title="最小生成树" class="md-nav__link">最小生成树</a><li class="md-nav__item"><a href="../../graph/mdst/" title="最小树形图" class="md-nav__link">最小树形图</a><li class="md-nav__item"><a href="../../graph/shortest-path/" title="最短路" class="md-nav__link">最短路</a><li class="md-nav__item"><a href="../../graph/differential-constraints/" title="差分约束" class="md-nav__link">差分约束</a><li class="md-nav__item"><a href="../../graph/kth-path/" title="k 短路" class="md-nav__link">k 短路</a><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-13" type="checkbox" id="nav-8-13"> <label class="md-nav__link" for="nav-8-13">连通性相关</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-8-13">连通性相关</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../graph/scc/" title="强连通分量" class="md-nav__link">强连通分量</a><li class="md-nav__item"><a href="../../graph/bcc/" title="双连通分量" class="md-nav__link">双连通分量</a><li class="md-nav__item"><a href="../../graph/bridge/" title="割点和桥" class="md-nav__link">割点和桥</a><li class="md-nav__item"><a href="../../graph/2-sat/" title="2-SAT" class="md-nav__link">2-SAT</a></ul></nav><li class="md-nav__item"><a href="../../graph/euler/" title="欧拉图" class="md-nav__link">欧拉图</a><li class="md-nav__item"><a href="../../graph/hamilton/" title="哈密顿图" class="md-nav__link">哈密顿图</a><li class="md-nav__item"><a href="../../graph/bi-graph/" title="二分图" class="md-nav__link">二分图</a><li class="md-nav__item"><a href="../../graph/min-circle/" title="最小环" class="md-nav__link">最小环</a><li class="md-nav__item"><a href="../../graph/planar/" title="平面图" class="md-nav__link">平面图</a><li class="md-nav__item"><a href="../../graph/color/" title="图的着色" class="md-nav__link">图的着色</a><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-8-20" type="checkbox" id="nav-8-20"> <label class="md-nav__link" for="nav-8-20">网络流</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-8-20">网络流</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../graph/flow/" title="网络流简介" class="md-nav__link">网络流简介</a><li class="md-nav__item"><a href="../../graph/flow/node/" title="拆点" class="md-nav__link">拆点</a><li class="md-nav__item"><a href="../../graph/flow/max-flow/" title="最大流" class="md-nav__link">最大流</a><li class="md-nav__item"><a href="../../graph/flow/min-cut/" title="最小割" class="md-nav__link">最小割</a><li class="md-nav__item"><a href="../../graph/flow/min-cost/" title="费用流" class="md-nav__link">费用流</a><li class="md-nav__item"><a href="../../graph/flow/bound/" title="上下界网络流" class="md-nav__link">上下界网络流</a></ul></nav><li class="md-nav__item"><a href="../../graph/misc/" title="图论杂项" class="md-nav__link">图论杂项</a></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9"> <label class="md-nav__link" for="nav-9">计算几何</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-9">计算几何</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../geometry/" title="计算几何部分简介" class="md-nav__link">计算几何部分简介</a><li class="md-nav__item"><a href="../../geometry/2d/" title="二维计算几何基础" class="md-nav__link">二维计算几何基础</a><li class="md-nav__item"><a href="../../geometry/3d/" title="三维计算几何基础" class="md-nav__link">三维计算几何基础</a><li class="md-nav__item"><a href="../../geometry/distance/" title="距离" class="md-nav__link">距离</a><li class="md-nav__item"><a href="../../geometry/pick/" title="Pick 定理" class="md-nav__link">Pick 定理</a><li class="md-nav__item"><a href="../../geometry/triangulation/" title="三角剖分" class="md-nav__link">三角剖分</a><li class="md-nav__item"><a href="../../geometry/convex-hull/" title="凸包" class="md-nav__link">凸包</a><li class="md-nav__item"><a href="../../geometry/scanning/" title="扫描线" class="md-nav__link">扫描线</a><li class="md-nav__item"><a href="../../geometry/rotating-calipers/" title="旋转卡壳" class="md-nav__link">旋转卡壳</a><li class="md-nav__item"><a href="../../geometry/half-plane-intersection/" title="半平面交" class="md-nav__link">半平面交</a><li class="md-nav__item"><a href="../../geometry/nearest-points/" title="平面最近点对" class="md-nav__link">平面最近点对</a><li class="md-nav__item"><a href="../../geometry/magic/" title="计算几何杂项" class="md-nav__link">计算几何杂项</a></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10"> <label class="md-nav__link" for="nav-10">杂项</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-10">杂项</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../misc/" title="杂项简介" class="md-nav__link">杂项简介</a><li class="md-nav__item"><a href="../../misc/io/" title="读入、输出优化" class="md-nav__link">读入、输出优化</a><li class="md-nav__item"><a href="../../misc/complexity/" title="复杂度" class="md-nav__link">复杂度</a><li class="md-nav__item"><a href="../../misc/discrete/" title="离散化" class="md-nav__link">离散化</a><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-5" type="checkbox" id="nav-10-5"> <label class="md-nav__link" for="nav-10-5">离线算法</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-10-5">离线算法</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../misc/offline/" title="离线算法简介" class="md-nav__link">离线算法简介</a><li class="md-nav__item"><a href="../../misc/cdq-divide/" title="CDQ 分治" class="md-nav__link">CDQ 分治</a><li class="md-nav__item"><a href="../../misc/mo-algo/" title="莫队算法" class="md-nav__link">莫队算法</a></ul></nav><li class="md-nav__item"><a href="../../misc/fractional-programming/" title="分数规划" class="md-nav__link">分数规划</a><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-7" type="checkbox" id="nav-10-7"> <label class="md-nav__link" for="nav-10-7">随机化</label><nav class="md-nav" data-md-component="collapsible" data-md-level="2"><label class="md-nav__title" for="nav-10-7">随机化</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="../../misc/random/" title="随机函数" class="md-nav__link">随机函数</a><li class="md-nav__item"><a href="../../misc/hill-climbing/" title="爬山算法" class="md-nav__link">爬山算法</a><li class="md-nav__item"><a href="../../misc/simulated-annealing/" title="模拟退火" class="md-nav__link">模拟退火</a><li class="md-nav__item"><a href="../../misc/random-incremental/" title="随机增量法" class="md-nav__link">随机增量法</a></ul></nav><li class="md-nav__item"><a href="../../misc/largest-matrix/" title="悬线法" class="md-nav__link">悬线法</a><li class="md-nav__item"><a href="../../misc/cc-basic/" title="计算理论基础" class="md-nav__link">计算理论基础</a><li class="md-nav__item"><a href="../../misc/endianness/" title="字节顺序" class="md-nav__link">字节顺序</a></ul></nav></ul></nav></div></div></div><div class="md-sidebar md-sidebar--secondary" data-md-component="toc"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--secondary"><label class="md-nav__title" for="__toc">目录</label><ul class="md-nav__list" data-md-scrollfix=""><li class="md-nav__item"><a href="#_1" title="递归详解" class="md-nav__link">递归详解</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#_2" title="为什么要写递归" class="md-nav__link">为什么要写递归</a><li class="md-nav__item"><a href="#_3" title="写递归的技巧" class="md-nav__link">写递归的技巧</a><li class="md-nav__item"><a href="#_4" title="递归优化" class="md-nav__link">递归优化</a></ul></nav><li class="md-nav__item"><a href="#_5" title="分治算法" class="md-nav__link">分治算法</a><li class="md-nav__item"><a href="#__comments" title="评论" class="md-nav__link md-nav__link--active">评论</a></ul></nav></div></div></div><div class="md-content"><article class="md-content__inner md-typeset"><a href="https://github.com/24OI/OI-wiki/blob/master/docs/basic/divide-and-conquer.md" title="编辑此页" class="md-icon md-content__icon"></a><h1>递归 &amp; 分治</h1><blockquote class="page-time"></blockquote><p>首先简单阐述一下递归，分治算法，动态规划，贪心算法这几个东西的区别和联系，心里有个印象就好。<p>递归是一种编程技巧，一种解决问题的思维方式；分治算法和动态规划很大程度上是递归思想基础上的（虽然实现动态规划大都不是递归了，但是我们要注重过程和思想），解决更具体问题的两类算法思想；贪心算法是动态规划算法的一个子集，可以更高效解决一部分更特殊的问题。<p>分治算法将在这节讲解，以最经典的归并排序为例，它把待排序数组不断二分为规模更小的子问题处理，这就是 “分而治之” 这个词的由来。显然，排序问题分解出的子问题是不重复的，如果有的问题分解后的子问题有重复的（重叠子问题性质），那么这就交给动态规划算法去解决！<h2 id="_1">递归详解<a class="headerlink" href="#_1" title="Permanent link">¶</a></h2><p>介绍分治之前，首先要弄清楚递归这个概念。<p>递归的基本思想是某个函数直接或者间接地调用自身，这样就把原问题的求解转换为许多性质相同但是规模更小的子问题。我们只需要关注如何把原问题划分成符合条件的子问题，而不需要去研究这个子问题是如何被解决的。递归和枚举的区别在于：枚举是横向地把问题划分，然后依次求解子问题，而递归是把问题逐级分解，是纵向的拆分。<p>以下会举例说明我对递归的一点理解，<strong>如果你不想看下去了，请记住这几个问题怎么回答：</strong><ol><li>如何给一堆数字排序？ 答：分成两半，先排左半边再排右半边，最后合并就行了，至于怎么排左边和右边，请重新阅读这句话。<li>孙悟空身上有多少根毛？ 答：一根毛加剩下的毛。<li>你今年几岁？ 答：去年的岁数加一岁,1999 年我出生。</ol><p>递归代码最重要的两个特征：结束条件和自我调用。自我调用是在解决子问题，而结束条件定义了最简子问题的答案。<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div><td class="code"><div class="codehilite"><pre><span></span><span class="kt">int</span> <span class="nf">func</span><span class="p">(</span><span class="err">传入数值</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="err">终止条件</span><span class="p">)</span> <span class="k">return</span> <span class="err">最小子问题解</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="err">缩小规模</span><span class="p">);</span>
<span class="p">}</span>
</pre></div></table><p>其实仔细想想，<strong>递归运用最成功的是什么？我认为是数学归纳法。</strong>我们高中都学过数学归纳法，使用场景大概是：我们推不出来某个求和公式，但是我们试了几个比较小的数，似乎发现了一点规律，然后编了一个公式，看起来应该是正确答案。但是数学是很严谨的，你哪怕穷举了一万个数都是正确的，但是第一万零一个数正确吗？这就要数学归纳法发挥神威了，可以假设我们编的这个公式在第 k 个数时成立，如果证明在第 k + 1 时也成立，那么我们编的这个公式就是正确的。<p>那么数学归纳法和递归有什么联系？我们刚才说了，递归代码必须要有结束条件，如果没有的话就会进入无穷无尽的自我调用，直到内存耗尽。而数学证明的难度在于，你可以尝试有穷种情况，但是难以将你的结论延伸到无穷大。这里就可以看出联系了 —— 无穷。<p>递归代码的精髓在于调用自己去解决规模更小的子问题，直到到达结束条件；而数学归纳法之所以有用，就在于不断把我们的猜测向上加一，扩大结论的规模，没有结束条件，从而把结论延伸到无穷无尽，也就完成了猜测正确性的证明。<h3 id="_2">为什么要写递归<a class="headerlink" href="#_2" title="Permanent link">¶</a></h3><p>首先为了训练逆向思考的能力。递推的思维是正常人的思维，总是看着眼前的问题思考对策，解决问题是将来时；递归的思维，逼迫我们倒着思考，看到问题的尽头，把解决问题的过程看做过去时。<p>第二，练习分析问题的结构，当问题可以被分解成相同结构的小问题时，你能敏锐发现这个特点，进而高效解决问题。<p>第三，跳出细节，从整体上看问题。再说说归并排序，其实可以不用递归来划分左右区域的，但是代价就是代码极其难以理解，大概看一下代码（归并排序在后面讲，这里大致看懂意思就行，体会递归的妙处）：<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div><td class="code"><div class="codehilite"><pre><span></span><span class="kt">void</span> <span class="nf">sort</span><span class="o">(</span><span class="n">Comparable</span><span class="o">[]</span> <span class="n">a</span><span class="o">){</span>    
    <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
    <span class="c1">// 这么复杂，是对排序的不尊重。我拒绝研究这样的代码。</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">sz</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">sz</span> <span class="o">&lt;</span> <span class="n">N</span><span class="o">;</span> <span class="n">sz</span> <span class="o">=</span> <span class="n">sz</span> <span class="o">+</span> <span class="n">sz</span><span class="o">)</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">lo</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">lo</span> <span class="o">&lt;</span> <span class="n">N</span> <span class="o">-</span> <span class="n">sz</span><span class="o">;</span> <span class="n">lo</span> <span class="o">+=</span> <span class="n">sz</span> <span class="o">+</span> <span class="n">sz</span><span class="o">)</span>
            <span class="n">merge</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">lo</span><span class="o">,</span> <span class="n">lo</span> <span class="o">+</span> <span class="n">sz</span> <span class="o">-</span> <span class="mi">1</span><span class="o">,</span> <span class="n">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">lo</span> <span class="o">+</span> <span class="n">sz</span> <span class="o">+</span> <span class="n">sz</span> <span class="o">-</span> <span class="mi">1</span><span class="o">,</span> <span class="n">N</span> <span class="o">-</span> <span class="mi">1</span><span class="o">));</span>
<span class="o">}</span>

<span class="cm">/* 我还是选择递归，简单，漂亮 */</span>
<span class="kt">void</span> <span class="nf">sort</span><span class="o">(</span><span class="n">Comparable</span><span class="o">[]</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">lo</span><span class="o">,</span> <span class="kt">int</span> <span class="n">hi</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">lo</span> <span class="o">&gt;=</span> <span class="n">hi</span><span class="o">)</span> <span class="k">return</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">lo</span> <span class="o">+</span> <span class="o">(</span><span class="n">hi</span> <span class="o">-</span> <span class="n">lo</span><span class="o">)</span> <span class="o">/</span> <span class="mi">2</span><span class="o">;</span>
    <span class="n">sort</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">lo</span><span class="o">,</span> <span class="n">mid</span><span class="o">);</span>
    <span class="n">sort</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">hi</span><span class="o">);</span>
    <span class="n">merge</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">lo</span><span class="o">,</span> <span class="n">mid</span><span class="o">,</span> <span class="n">hi</span><span class="o">);</span>
<span class="o">}</span>
</pre></div></table><p>看起来简洁漂亮是一方面，关键是<strong>可解释性很强</strong>：把左半边排序，把右半边排序，最后合并两边。而非递归版本看起来不知所云，充斥着各种难以理解的边界计算细节，特别容易出 bug 且难以调试，人生苦短，我更倾向于递归版本。<p>显然有时候递归处理是高效的，比如归并排序，<strong>有时候是低效的</strong>，比如数孙悟空身上的毛，因为堆栈会消耗额外空间，而简单的递推不会消耗空间。比如这个例子，给一个链表头，计算它的长度：<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div><td class="code"><div class="codehilite"><pre><span></span><span class="cm">/* 典型的递推遍历框架 */</span>
<span class="kd">public</span> <span class="kt">int</span> <span class="nf">size</span><span class="o">(</span><span class="n">Node</span> <span class="n">head</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">Node</span> <span class="n">p</span> <span class="o">=</span> <span class="n">head</span><span class="o">;</span> <span class="n">p</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">next</span><span class="o">)</span> <span class="n">size</span><span class="o">++;</span>
    <span class="k">return</span> <span class="n">size</span><span class="o">;</span>
<span class="o">}</span>
<span class="cm">/* 我偏要递归，万物皆递归 */</span>
<span class="kd">public</span> <span class="kt">int</span> <span class="nf">size</span><span class="o">(</span><span class="n">Node</span> <span class="n">head</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">head</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">size</span><span class="o">(</span><span class="n">head</span><span class="o">.</span><span class="na">next</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
<span class="o">}</span>
</pre></div></table><h3 id="_3">写递归的技巧<a class="headerlink" href="#_3" title="Permanent link">¶</a></h3><p>我的一点心得是：<strong>明白一个函数的作用并相信它能完成这个任务，千万不要试图跳进细节。</strong>千万不要跳进这个函数里面企图探究更多细节，否则就会陷入无穷的细节无法自拔，人脑能压几个栈啊。<p>先举个最简单的例子：遍历二叉树。<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div><td class="code"><div class="codehilite"><pre><span></span><span class="kt">void</span> <span class="nf">traverse</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">root</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="k">nullptr</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="n">traverse</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
    <span class="n">traverse</span><span class="p">(</span><span class="n">root</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
<span class="p">}</span>
</pre></div></table><p>这几行代码就足以扫荡任何一棵二叉树了。我想说的是，对于递归函数<code>traverse(root)</code>，我们只要相信：给它一个根节点<code>root</code>，它就能遍历这棵树，因为写这个函数不就是为了这个目的吗？所以我们只需要把这个节点的左右节点再甩给这个函数就行了，因为我相信它能完成任务的。那么遍历一棵N叉数呢？太简单了好吧，和二叉树一模一样啊。<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div><td class="code"><div class="codehilite"><pre><span></span><span class="kt">void</span> <span class="nf">traverse</span><span class="p">(</span><span class="n">TreeNode</span><span class="o">*</span> <span class="n">root</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="k">nullptr</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="nl">child</span> <span class="p">:</span> <span class="n">root</span><span class="o">-&gt;</span><span class="n">children</span><span class="p">)</span>
        <span class="n">traverse</span><span class="p">(</span><span class="n">child</span><span class="p">);</span>
<span class="p">}</span>
</pre></div></table><p>至于遍历的什么前、中、后序，那都是显而易见的，对于N叉树，显然没有中序遍历。<p>以下<strong>详解 LeetCode 的一道题来说明</strong>：给一课二叉树，和一个目标值，节点上的值有正有负，返回树中和等于目标值的路径条数，让你编写 pathSum 函数：<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div><td class="code"><div class="codehilite"><pre><span></span>/* 来源于 LeetCode PathSum III： https://leetcode.com/problems/path-sum-iii/ */
root = [10,5,-3,3,2,null,11,3,-2,null,1], sum = 8

      10
     /  \
    5   -3
   / \    \
  3   2   11
 / \   \
3  -2   1

Return 3. The paths that sum to 8 are:

1.  5 -&gt; 3
2.  5 -&gt; 2 -&gt; 1
3. -3 -&gt; 11
</pre></div></table><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9</pre></div><td class="code"><div class="codehilite"><pre><span></span><span class="cm">/* 看不懂没关系，底下有更详细的分析版本，这里突出体现递归的简洁优美 */</span>
<span class="kt">int</span> <span class="nf">pathSum</span><span class="p">(</span><span class="n">TreeNode</span> <span class="n">root</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sum</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="n">null</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">count</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">sum</span><span class="p">)</span> <span class="o">+</span> <span class="n">pathSum</span><span class="p">(</span><span class="n">root</span><span class="p">.</span><span class="n">left</span><span class="p">,</span> <span class="n">sum</span><span class="p">)</span> <span class="o">+</span> <span class="n">pathSum</span><span class="p">(</span><span class="n">root</span><span class="p">.</span><span class="n">right</span><span class="p">,</span> <span class="n">sum</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">count</span><span class="p">(</span><span class="n">TreeNode</span> <span class="n">node</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sum</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">node</span> <span class="o">==</span> <span class="n">null</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">val</span> <span class="o">==</span> <span class="n">sum</span><span class="p">)</span> <span class="o">+</span> <span class="n">count</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">left</span><span class="p">,</span> <span class="n">sum</span> <span class="o">-</span> <span class="n">node</span><span class="p">.</span><span class="n">val</span><span class="p">)</span> <span class="o">+</span> <span class="n">count</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">right</span><span class="p">,</span> <span class="n">sum</span> <span class="o">-</span> <span class="n">node</span><span class="p">.</span><span class="n">val</span><span class="p">);</span>
<span class="p">}</span>
</pre></div></table><p>题目看起来很复杂吧，不过代码却极其简洁，这就是递归的魅力。我来简单总结这个问题的<strong>解决过程</strong>：<p>首先明确，递归求解树的问题必然是要遍历整棵树的，所以<strong>二叉树的遍历框架</strong>（分别对左右孩子递归调用函数本身）必然要出现在主函数 pathSum 中。那么对于每个节点，他们应该干什么呢？他们应该看看，自己和脚底下的小弟们包含多少条符合条件的路径。好了，这道题就结束了。<p>按照前面说的技巧，根据刚才的分析来定义清楚每个递归函数应该做的事：<p>PathSum 函数：给他一个节点和一个目标值，他返回以这个节点为根的树中，和为目标值的路径总数。<p>count 函数：给他一个节点和一个目标值，他返回以这个节点为根的树中，能凑出几个以该节点为路径开头，和为目标值的路径总数。<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div><td class="code"><div class="codehilite"><pre><span></span><span class="cm">/* 有了以上铺垫，详细注释一下代码 */</span>
<span class="kt">int</span> <span class="nf">pathSum</span><span class="p">(</span><span class="n">TreeNode</span> <span class="n">root</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sum</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">root</span> <span class="o">==</span> <span class="n">null</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">pathImLeading</span> <span class="o">=</span> <span class="n">count</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">sum</span><span class="p">);</span> <span class="c1">// 自己为开头的路径数</span>
    <span class="kt">int</span> <span class="n">leftPathSum</span> <span class="o">=</span> <span class="n">pathSum</span><span class="p">(</span><span class="n">root</span><span class="p">.</span><span class="n">left</span><span class="p">,</span> <span class="n">sum</span><span class="p">);</span> <span class="c1">// 左边路径总数（相信他能算出来）</span>
    <span class="kt">int</span> <span class="n">rightPathSum</span> <span class="o">=</span> <span class="n">pathSum</span><span class="p">(</span><span class="n">root</span><span class="p">.</span><span class="n">right</span><span class="p">,</span> <span class="n">sum</span><span class="p">);</span> <span class="c1">// 右边路径总数（相信他能算出来）</span>
    <span class="k">return</span> <span class="n">leftPathSum</span> <span class="o">+</span> <span class="n">rightPathSum</span> <span class="o">+</span> <span class="n">pathImLeading</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">count</span><span class="p">(</span><span class="n">TreeNode</span> <span class="n">node</span><span class="p">,</span> <span class="kt">int</span> <span class="n">sum</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">node</span> <span class="o">==</span> <span class="n">null</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="c1">// 我自己能不能独当一面，作为一条单独的路径呢？</span>
    <span class="kt">int</span> <span class="n">isMe</span> <span class="o">=</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">val</span> <span class="o">==</span> <span class="n">sum</span><span class="p">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="c1">// 左边的小老弟，你那边能凑几个 sum - node.val 呀？</span>
    <span class="kt">int</span> <span class="n">leftBrother</span> <span class="o">=</span> <span class="n">count</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">left</span><span class="p">,</span> <span class="n">sum</span> <span class="o">-</span> <span class="n">node</span><span class="p">.</span><span class="n">val</span><span class="p">);</span> 
    <span class="c1">// 右边的小老弟，你那边能凑几个 sum - node.val 呀？</span>
    <span class="kt">int</span> <span class="n">rightBrother</span> <span class="o">=</span> <span class="n">count</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">right</span><span class="p">,</span> <span class="n">sum</span> <span class="o">-</span> <span class="n">node</span><span class="p">.</span><span class="n">val</span><span class="p">);</span>
    <span class="k">return</span>  <span class="n">isMe</span> <span class="o">+</span> <span class="n">leftBrother</span> <span class="o">+</span> <span class="n">rightBrother</span><span class="p">;</span> <span class="c1">// 我这能凑这么多个</span>
<span class="p">}</span>
</pre></div></table><p>还是那句话，明白每个函数能做的事，并相信他们能够完成。<p>总结下，PathSum 函数提供的二叉树遍历框架，在遍历中对每个节点调用 count 函数，看出先序遍历了吗（这道题什么序都是一样的）；count 函数也是一个二叉树遍历，用于寻找以该节点开头的目标值路径。好好体会吧！<p>LeetCode 有递归专题练习，<a href="https://leetcode.com/explore/learn/card/recursion-i/">点这里去做题</a><h3 id="_4">递归优化<a class="headerlink" href="#_4" title="Permanent link">¶</a></h3><p>先来一道例题：<a href="https://www.luogu.org/problemnew/show/P1618">三连击</a>。<p>这道题朴素的递归写法只能得到 25 分，因为递归次数太多，所以超时。<p>怎么优化呢？详见<a href="/search/optimization">搜索优化</a>和<a href="/dp/memo/">记忆化搜索</a>。<h2 id="_5">分治算法<a class="headerlink" href="#_5" title="Permanent link">¶</a></h2><p><strong>归并排序</strong>，典型的分治算法；分治，典型的递归结构。<p>分治算法可以分三步走：分解 -&gt; 解决 -&gt; 合并<ol><li>分解原问题为结构相同的子问题。<li>分解到某个容易求解的边界之后，进行第归求解。<li>将子问题的解合并成原问题的解。</ol><p>归并排序，我们就叫这个函数<code>merge_sort</code>吧，按照我们上面说的，要明确该函数的职责，即<strong>对传入的一个数组排序</strong>。OK，那么这个问题能不能分解呢？当然可以！给一个数组排序，不就等于给该数组的两半分别排序，然后合并就完事了。<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div><td class="code"><div class="codehilite"><pre><span></span><span class="kt">void</span> <span class="nf">merge_sort</span><span class="p">(</span><span class="err">一个数组</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="err">可以很容易处理</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="n">merge_sort</span><span class="p">(</span><span class="err">左半个数组</span><span class="p">);</span>
    <span class="n">merge_sort</span><span class="p">(</span><span class="err">右半个数组</span><span class="p">);</span>
    <span class="n">merge</span><span class="p">(</span><span class="err">左半个数组</span><span class="p">,</span> <span class="err">右半个数组</span><span class="p">);</span>
<span class="p">}</span>
</pre></div></table><p>好了，这个算法也就这样了，完全没有任何难度。记住之前说的，相信函数的能力，传给他半个数组，那么这半个数组就已经被排好了。而且你会发现这不就是个二叉树遍历模板吗？为什么是后序遍历？因为我们分治算法的套路是 <strong>分解 -&gt; 解决（触底） -&gt; 合并（回溯）</strong> 啊，先左右分解，再处理合并，回溯就是在退栈，就相当于后序遍历了。至于<code>merge</code>函数，参考两个有序链表的合并，简直一模一样。<p>LeetCode 上有分治算法的专项练习，<a href="https://leetcode.com/tag/divide-and-conquer/">点这里去做题</a><hr><blockquote class="page-copyright"><span><i class="md-icon">build</i>本页面最近更新：</span><span class="facts_modified"></span>，<a class="edit_history">更新历史</a><br><span><i class="md-icon">edit</i>发现错误？想一起完善？ <a href="https://github.com/24OI/OI-wiki/blob/master/docs/basic/divide-and-conquer.md" title="编辑此页" class="page_edit_url">在 GitHub 上编辑此页！</a></span><br><span><i class="md-icon">people</i>本页面贡献者：</span><span class="page_contributors"></span><br><span><i class="md-icon">copyright</i>本页面的全部内容在 <strong><a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">CC BY-SA 4.0</a> 和 <a href="https://github.com/zTrix/sata-license">SATA</a></strong> 协议之条款下提供，附加条款亦可能应用</span></blockquote><h2 id="__comments" data-no-instant="">评论</h2><form id="gitalk-form" onsubmit="return!1" data-no-instant=""><div id="gitalk-container" data-no-instant=""></div></form><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script>const gitalk = new Gitalk({
    id: '递归 & 分治',
    owner: 'OI-wiki',
    repo: 'gitment',
    admin: ['Ir1d', 'cjsoft', 'TrisolarisHD', 'Xeonacid'],
    clientID: 'd6a911c8fba0194626d4',
    clientSecret: '867ec7e13cc99b420bd147cbb62d5cfec271ba81',
    distractionFreeMode: false,
    pagerDirection: 'first'
  })
  gitalk.render('gitalk-container')</script></article></div></div></main><script src="https://s3.pstatp.com/cdn/expire-1-M/instantclick/3.0.1/instantclick.min.js" data-no-instant=""></script><script data-no-instant="">InstantClick.init(!0)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/data-tip@0.0.52/dist/data-tip.min.css"><script>function scrollFunction(){20<document.body.scrollTop||20<document.documentElement.scrollTop?document.getElementById("myBtn").style.display="block":document.getElementById("myBtn").style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}window.onscroll=function(){scrollFunction()}</script><button onclick="topFunction()" id="myBtn" class="data-tip-left" data-tip="回到顶部"><svg class="Zi Zi--BackToTop data-tip-left" data-tip="回到顶部" fill="currentColor" viewBox="0 0 24 24" width="24" height="24"><path d="M16.036 19.59a1 1 0 0 1-.997.995H9.032a.996.996 0 0 1-.997-.996v-7.005H5.03c-1.1 0-1.36-.633-.578-1.416L11.33 4.29a1.003 1.003 0 0 1 1.412 0l6.878 6.88c.782.78.523 1.415-.58 1.415h-3.004v7.005z"></path></svg></button><footer class="md-footer"><div class="md-footer-nav"><nav class="md-footer-nav__inner md-grid"><a href="../simulate/" title="模拟" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev"><div class="md-flex__cell md-flex__cell--shrink"><i class="md-icon md-icon--arrow-back md-footer-nav__button"></i></div><div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span class="md-flex__ellipsis"><span class="md-footer-nav__direction">后退 </span>模拟</span></div></a><a href="../greedy/" title="贪心" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next"><div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span class="md-flex__ellipsis"><span class="md-footer-nav__direction">前进 </span>贪心</span></div><div class="md-flex__cell md-flex__cell--shrink"><i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i></div></a></nav></div><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class="md-footer-copyright"><div class="md-footer-copyright__highlight">Copyright © 2016 - 2019 OI Wiki Team</div>powered by <a href="https://www.mkdocs.org">MkDocs</a> and <a href="https://squidfunk.github.io/mkdocs-material/">Material for MkDocs</a></div><span style="float:right" class="build_date_utc"><a href="https://github.com/24OI/OI-wiki">最近更新：f176a3e, 2019-04-10</a></span><script>console.log(`%c OI Wiki %c f176a3e %c`,"background:#35495e ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff","background:#41b883 ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff","background:transparent");
          console.log('少年，恭喜你囍提彩蛋，linhua.org 将是下一代编程竞赛训练平台，如果您对此感兴趣，欢迎访问 https://join-us.linhua.org');</script></div></div></footer></div><script src="https://cdn.jsdelivr.net/npm/ah@1.4.0/application.bce3478d.js"></script><script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script><script src="https://cdn.jsdelivr.net/gh/ethantw/Han@3.3.0/dist/han.min.js"></script><script src="../../_static/js/extra.js?v=10"></script>